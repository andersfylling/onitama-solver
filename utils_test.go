package onitamago

import (
	"testing"
)

func TestMakeCompactBoard(t *testing.T) {
	normal := Bitboard(0x2a1408140200)
	compact := Bitboard(0x1551141)

	got := MakeCompactBoard(normal)
	if got != compact {
		t.Errorf("got different compacted board. Got %d, wants %d", got, compact)
	}
}

func TestCompactBoard(t *testing.T) {
	inputs := [...]Bitboard{
		5577006791947779410,
		8674665223082153551,
		15352856648520921629,
		13260572831089785859,
		3916589616287113937,
		6334824724549167320,
		9828766684487745566,
		10667007354186551956,
		894385949183117216,
		11998794077335055257,
		4751997750760398084,
		7504504064263669287,
		11199607447739267382,
		3510942875414458836,
		12156940908066221323,
		4324745483838182873,
		11833901312327420776,
		11926759511765359899,
		6263450610539110790,
		11239168150708129139,
		1874068156324778273,
		3328451335138149956,
		14486903973548550719,
		7955079406183515637,
		11926873763676642186,
		2740103009342231109,
		6941261091797652072,
		1905388747193831650,
		17204678798284737396,
		15649472107743074779,
		4831389563158288344,
		261049867304784443,
		10683692646452562431,
		5600924393587988459,
		18218388313430417611,
		9956202364908137547,
		5486140987150761883,
		9768663798983814715,
		6382800227808658932,
		2781055864473387780,
		10821471013040158923,
		4990765271833742716,
		14242321332569825828,
		11792151447964398879,
		13126262220165910460,
		14117161486975057715,
		2338498362660772719,
		2601737961087659062,
		7273596521315663110,
		3337066551442961397,
		17344948852394588913,
		11963748953446345529,
		8249030965139585917,
		898860202204764712,
		9010467728050264449,
		9908585559158765387,
		11273630029763932141,
		15505210698284655633,
		2227583514184312746,
		12096659438561119542,
		8603989663476771718,
		6842348953158377901,
		7388428680384065704,
		6735196588112087610,
		1687184559264975024,
		13174268766980400525,
		17496662575514578077,
		6296367092202729479,
		18252401681137062077,
		8505906760983331750,
		837825985403119657,
		13771804148684671731,
		8549944162621642512,
		8807817071862113702,
		12432680895096110463,
		15595235597337683065,
		6556961545928831643,
		5199948958991797301,
		15213854965919594827,
		5089134323978233018,
		16194613440650274502,
		12947799971452915849,
		10428415896243638596,
		18317291550776694829,
		17490665426807838719,
		2970700287221458280,
		6651414131918424343,
		5944830206637008055,
		788787457839692041,
		15399114114227588261,
		14967026985784794439,
		3409814636252858217,
		11407674492757219439,
		4937104021912138218,
		10950412492527322440,
		2202916659517317514,
		5793183108815074904,
		1169089424364679180,
		11818186001859264308,
		3784560248718450071,
	}
	for _, input := range inputs {
		a, b := MakeCompactBoard(input), MakeCompactBoardFast(input)
		if a != b {
			t.Errorf("expected MakeCompactBoardFast to have the same output as MakeCompactBoard. Got %d, wants %d", a, b)
		}
	}
}
